<!-- Combobox Field Wrapper -->
<div id="{{id}}" class="[&>[data-slot=label]+[data-slot=control]]:mt-3 [&>[data-slot=label]+[data-slot=description]]:mt-1 [&>[data-slot=description]+[data-slot=control]]:mt-3 [&>[data-slot=control]+[data-slot=description]]:mt-3 [&>[data-slot=control]+[data-slot=error]]:mt-3 *:data-[slot=label]:font-medium">
  {{#if label}}
  <label data-slot="label"
         class="text-base/6 text-zinc-950 select-none data-disabled:opacity-50 sm:text-sm/6 dark:text-white">
    {{label}}
  </label>
  {{/if}}
  {{#if description}}
  <p data-slot="description"
     class="text-base/6 text-zinc-500 data-disabled:opacity-50 sm:text-sm/6 dark:text-zinc-400">
    {{description}}
  </p>
  {{/if}}

  <!-- Combobox Control Wrapper -->
  <span data-slot="control"
        class="relative block w-full before:absolute before:inset-px before:rounded-[calc(var(--radius-lg)-1px)] before:bg-white before:shadow-sm dark:before:hidden after:pointer-events-none after:absolute after:inset-0 after:rounded-lg after:ring-transparent after:ring-inset sm:has-[:focus]:after:ring-2 sm:has-[:focus]:after:ring-blue-500 has-[:disabled]:opacity-50 has-[:disabled]:before:bg-zinc-950/5 has-[:disabled]:before:shadow-none {{#if is_invalid}}before:shadow-red-500/10{{/if}}">
    <input type="text"
           role="combobox"
           aria-autocomplete="list"
           data-attr:aria-expanded="$is_open"
           class="relative block w-full appearance-none rounded-lg py-[calc(--spacing(2.5)-1px)] sm:py-[calc(--spacing(1.5)-1px)] pr-[calc(--spacing(10)-1px)] pl-[calc(--spacing(3.5)-1px)] sm:pr-[calc(--spacing(9)-1px)] sm:pl-[calc(--spacing(3)-1px)] text-base/6 text-zinc-950 placeholder:text-zinc-500 sm:text-sm/6 dark:text-white border border-zinc-950/10 hover:border-zinc-950/20 dark:border-white/10 dark:hover:border-white/20 bg-transparent dark:bg-white/5 focus:outline-hidden data-invalid:border-red-500 data-invalid:hover:border-red-500 dark:data-invalid:border-red-500 dark:data-invalid:hover:border-red-500 disabled:border-zinc-950/20 dark:disabled:border-white/15 dark:disabled:bg-white/2.5 dark:hover:disabled:border-white/15 dark:scheme-dark"
           {{#if aria_label}}aria-label="{{aria_label}}"{{/if}}
           {{#if placeholder}}placeholder="{{placeholder}}"{{/if}}
           data-bind="$value"
           data-attr:disabled="$is_disabled"
           data-attr:data-invalid="$is_invalid"
           data-on:change="{{change}}"
           data-on:input="$is_open = true"
           data-on:focus="$is_open = true" />
    <!-- Chevron Button -->
    <button type="button"
            class="group absolute inset-y-0 right-0 flex items-center px-2"
            tabindex="-1"
            data-on:click="$is_open = !$is_open">
      <svg class="size-5 stroke-zinc-500 group-disabled:stroke-zinc-600 group-hover:stroke-zinc-700 sm:size-4 dark:stroke-zinc-400 dark:group-hover:stroke-zinc-300 forced-colors:stroke-[CanvasText]"
           viewBox="0 0 16 16"
           aria-hidden="true"
           fill="none">
        <path d="M5.75 10.75L8 13L10.25 10.75" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M10.25 5.25L8 3L5.75 5.25" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>
  </span>

  <!-- Options Panel (hidden by default) -->
  <div role="listbox"
       data-show="$is_open"
       class="isolate min-w-[calc(var(--input-width)+8px)] scroll-py-1 rounded-xl p-1 select-none outline outline-transparent focus:outline-hidden overflow-y-scroll overscroll-contain bg-white/75 backdrop-blur-xl dark:bg-zinc-800/75 shadow-lg ring-1 ring-zinc-950/10 dark:ring-white/10 dark:ring-inset transition-opacity duration-100 ease-in [--anchor-gap:--spacing(2)] [--anchor-padding:--spacing(4)]">
    {{> combobox_options}}
  </div>

  <p data-slot="error"
     data-show="$error_message"
     class="text-base/6 text-red-600 data-disabled:opacity-50 sm:text-sm/6 dark:text-red-500"
     data-text="$error_message">
  </p>
</div>