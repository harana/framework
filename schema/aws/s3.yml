- object: aws_s3_bucket
  id: [account_id, bucket_name]
  schema:
    - account_id: string #max(20)
    - acl: private | public_read | public_read_write | authenticated_read = private
    - bucket_name: string #unique #max(63)
    - cors_enabled: boolean = false
    - created_at: date = now()
    - encryption_algorithm: none | aes256 | aws_kms = none
    - is_versioned: boolean = false
    - kms_key_id: string? #max(255)
    - lifecycle_rules_count: int = 0 #min(0)
    - location: string? #max(100)
    - region: string? #max(50)
    - tags: string? # json
    - updated_at: date = now()

- object: aws_s3_object
  id: [bucket_id, key]
  schema:
    - bucket_id: id -> aws_s3_bucket.id
    - content_type: string? #max(255)
    - created_at: date = now()
    - etag: string? #max(255)
    - is_delete_marker: boolean = false
    - key: string #max(1024)
    - last_modified: date?
    - metadata: string? # json
    - size: int? #min(0)
    - storage_class: standard | reduced_redundancy | standard_ia | onezone_ia | intelligent_tiering | glacier | deep_archive = standard
    - tags: string? # json
    - updated_at: date = now()
    - version_id: string? #max(255)

- object: aws_s3_bucket_policy
  id: [bucket_id]
  schema:
    - bucket_id: id -> aws_s3_bucket.id
    - created_at: date = now()
    - policy_document: string #required
    - updated_at: date = now()

- object: aws_s3_multipart_upload
  id: [bucket_id, key, upload_id]
  schema:
    - bucket_id: id -> aws_s3_bucket.id
    - completed_at: date?
    - content_type: string? #max(255)
    - created_at: date = now()
    - key: string #max(1024)
    - metadata: string? # json
    - status: initiated | in_progress | completed | aborted = initiated
    - storage_class: string? #max(50)
    - upload_id: string #unique #max(255)