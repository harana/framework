- object: healthcheck
  schema:
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - interval_seconds: int = 60 #min(1)
    - name: string #unique #max(200)
    - timeout_seconds: int = 30 #min(1)
    - type: route | response_time | job_execution | event_rate | custom = route
    - updated_at: date = now()

- object: healthcheck_route
  id: [healthcheck_id]
  schema:
    - expected_status_codes: string = 200 #max(100)
    - expected_body_contains: string? #max(1000)
    - headers: string?
    - healthcheck_id: id -> healthcheck.id
    - method: get | post | put | patch | delete | head | options = get
    - url: string #url #max(2000)

- object: healthcheck_response_time
  id: [healthcheck_id]
  schema:
    - healthcheck_id: id -> healthcheck.id
    - route_id: id? -> route.id
    - threshold_ms: int = 1000 #min(1)
    - url: string? #url #max(2000)

- object: healthcheck_job_execution
  id: [healthcheck_id]
  schema:
    - healthcheck_id: id -> healthcheck.id
    - job_name: string #max(200)
    - max_duration_seconds: int? #min(1)
    - max_failures_percent: decimal? #min(0) #max(100)
    - queue: string? #max(100)

- object: healthcheck_event_rate
  id: [healthcheck_id]
  schema:
    - comparison: gt | gte | lt | lte | eq | neq = gte
    - event_type: string #max(100)
    - healthcheck_id: id -> healthcheck.id
    - source: string? #max(200)
    - threshold: decimal #min(0)
    - window: second | minute | hour | day = minute

- object: healthcheck_custom
  id: [healthcheck_id]
  schema:
    - healthcheck_id: id -> healthcheck.id
    - metric_id: id? -> metric.id
    - query: string #max(5000)
    - success_condition: string #max(1000)

- object: healthcheck_result
  id: [healthcheck_id, checked_at]
  schema:
    - checked_at: date = now()
    - duration_ms: int? #min(0)
    - error_message: string? #max(2000)
    - healthcheck_id: id -> healthcheck.id
    - metadata: string?
    - status: healthy | degraded | unhealthy = healthy

- object: healthcheck_alert
  id: [healthcheck_id]
  schema:
    - consecutive_failures: int = 3 #min(1)
    - cooldown_seconds: int = 300 #min(0)
    - created_at: date = now()
    - healthcheck_id: id -> healthcheck.id
    - is_active: boolean = true
    - last_triggered_at: date?
    - notification_channel: string? #max(100)
    - updated_at: date = now()

- object: health_status
  schema:
    - service_name: string
    - healthy: boolean
    - status: string
    - latency_ms: int
    - details: health_details
    - checked_at: date

- object: health_details
  schema:
    - message: string
    - error: string
    - extra: map[string, any]

- object: health_check
  schema:
    - name: string
    - healthy: boolean
    - latency_ms: int
    - error: string

- object: system_metrics
  schema:
    - cpu_usage: float
    - memory_usage: float
    - disk_usage: float
    - active_connections: int
