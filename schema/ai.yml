- name: ai_model
  id: [name, version]
  schema:
    - context_window: int? #min(1)
    - created_at: date = now()
    - description: string? #max(1000)
    - is_active: boolean = true
    - max_output_tokens: int? #min(1)
    - provider: openai | anthropic | google | aws | azure | local = openai
    - type: chat | completion | embedding | image | audio | vision = chat
    - updated_at: date = now()
    - version: string #required #max(50)

- name: ai_model_config
  id: [model_id, name]
  schema:
    - frequency_penalty: decimal = 0 #min(-2) #max(2)
    - max_tokens: int? #min(1)
    - model_id: id #required -> ai_model.id
    - presence_penalty: decimal = 0 #min(-2) #max(2)
    - stop_sequences: string?
    - temperature: decimal = 1.0 #min(0) #max(2)
    - top_p: decimal = 1.0 #min(0) #max(1)

- name: ai_prompt_template
  schema:
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - model_id: id? -> ai_model.id
    - system_prompt: string?
    - template: string #required
    - updated_at: date = now()
    - variables: string?

- name: ai_conversation
  id: [user_id, created_at]
  schema:
    - created_at: date = now()
    - metadata: string?
    - model_id: id #required -> ai_model.id
    - status: active | archived | deleted = active
    - title: string? #max(200)
    - updated_at: date = now()
    - user_id: id #required -> user.id
- name: ai_message
  id: [conversation_id, created_at]
  schema:
    - content: string #required
    - conversation_id: id #required -> ai_conversation.id
    - created_at: date = now()
    - metadata: string?
    - role: system | user | assistant | function | tool = user
    - tokens_used: int? #min(0)

- name: ai_embedding
  id: [model_id, source_id, source_type]
  schema:
    - content: string #required
    - created_at: date = now()
    - dimensions: int #required #min(1)
    - metadata: string?
    - model_id: id #required -> ai_model.id
    - source_id: string? #max(200)
    - source_type: string? #max(100)
    - vector: string #required
- name: ai_usage
  id: [model_id, created_at, user_id]
  schema:
    - completion_tokens: int = 0 #min(0)
    - cost: decimal? #min(0)
    - created_at: date = now()
    - model_id: id #required -> ai_model.id
    - prompt_tokens: int = 0 #min(0)
    - request_type: chat | completion | embedding | image | audio = chat
    - total_tokens: int = 0 #min(0)
    - user_id: id? -> user.id

- name: ai_chat_message
  schema:
    - role: string
    - content: string

- name: ai_entity
  schema:
    - text: string
    - type: string
    - start: int
    - end: int
    - confidence: float

- name: ai_tensor_shape
  schema:
    - name: string
    - dtype: string
    - shape: list[integer]

- name: ai_classification_prediction
  schema:
    - label: string
    - confidence: float
    - index: int

- name: ai_object_detection
  schema:
    - label: string
    - confidence: float
    - x: float
    - y: float
    - width: float
    - height: float
