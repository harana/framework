- object: push_device
  id: [user_id, device_token]
  schema:
    - created_at: date = now()
    - device_token: string #max(500)
    - is_active: boolean = true
    - platform: apns | web | fcm = fcm
    - updated_at: date = now()
    - user_agent: string? #max(500)
    - user_id: id -> user.id
- object: push_topic
  id: [name]
  schema:
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - name: string #unique #max(200)
    - platform: apns | web | fcm = fcm

- object: push_topic_subscription
  id: [topic_id, device_id]
  schema:
    - device_id: id -> push_device.id
    - subscribed_at: date = now()
    - topic_id: id -> push_topic.id
- object: push_notification_log
  id: [device_id, sent_at]
  schema:
    - body: string #max(1000)
    - device_id: id? -> push_device.id
    - error_message: string? #max(1000)
    - message_id: string? #max(200)
    - platform: apns | web | fcm = fcm
    - sent_at: date = now()
    - status: pending | sent | delivered | failed = pending
    - title: string #max(200)
    - topic_id: id? -> push_topic.id

- object: push_notification
  schema:
    - title: string
    - body: string
    - platform: string
    - token: string
    - data: map[string, any]
    - badge: int
    - sound: string

- object: push_action
  schema:
    - method: string
    - title: string
    - icon: string

- object: push_subscription
  schema:
    - endpoint: string
    - keys: push_subscription_keys

- object: push_subscription_keys
  schema:
    - p256dh: string
    - auth: string

- object: push_failure
  schema:
    - token: string
    - error: string
