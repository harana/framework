- name: stripe_customer
  id: [customer_id]
  schema:
    - created_at: date = now()
    - customer_id: string #required #unique #max(200)
    - description: string? #max(500)
    - email: string? #email #max(255)
    - metadata: string? # json
    - name: string? #max(200)
    - phone: string? #max(20)
    - updated_at: date = now()
    - user_id: id? -> user.id

- name: stripe_payment_intent
  id: [payment_intent_id]
  schema:
    - amount: int #required #min(0)
    - capture_method: automatic | manual = automatic
    - client_secret: string? #max(500)
    - created_at: date = now()
    - currency: string #required #max(3)
    - customer_id: string? #max(200)
    - description: string? #max(500)
    - metadata: string? # json
    - payment_intent_id: string #required #unique #max(200)
    - payment_method: string? #max(200)
    - status: requires_payment_method | requires_confirmation | requires_action | processing | succeeded | cancelled = requires_payment_method
    - updated_at: date = now()

- name: stripe_subscription
  id: [subscription_id]
  schema:
    - cancel_at_period_end: boolean = false
    - cancelled_at: date?
    - created_at: date = now()
    - current_period_end: date?
    - current_period_start: date?
    - customer_id: string #required #max(200)
    - metadata: string? # json
    - price_id: string #required #max(200)
    - quantity: int = 1 #min(1)
    - status: active | past_due | cancelled | incomplete | trialing | unpaid = active
    - subscription_id: string #required #unique #max(200)
    - trial_end: date?
    - updated_at: date = now()

- name: stripe_product
  id: [product_id]
  schema:
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - metadata: string? # json
    - name: string #required #max(200)
    - product_id: string #required #unique #max(200)
    - updated_at: date = now()

- name: stripe_price
  id: [price_id]
  schema:
    - created_at: date = now()
    - currency: string #required #max(3)
    - is_active: boolean = true
    - price_id: string #required #unique #max(200)
    - product_id: string #required #max(200)
    - recurring_interval: day | week | month | year?
    - recurring_interval_count: int = 1 #min(1)
    - unit_amount: int #required #min(0)

- name: stripe_refund
  id: [refund_id]
  schema:
    - amount: int #required #min(0)
    - created_at: date = now()
    - metadata: string? # json
    - payment_intent_id: string #required #max(200)
    - reason: duplicate | fraudulent | requested_by_customer?
    - refund_id: string #required #unique #max(200)
    - status: pending | succeeded | failed | cancelled = pending

- name: stripe_webhook_event
  id: [event_id]
  schema:
    - created_at: date = now()
    - event_id: string #required #unique #max(200)
    - event_type: string #required #max(200)
    - payload: string #required
    - processed_at: date?
    - status: pending | processed | failed = pending
