- name: Cloudflare R2 Bucket
  type: cf_r2_bucket
  id: [account_id, bucket_name]
  schema:
    - account_id: String #required #max(50)
    - bucket_name: String #required #unique #max(63)
    - created_at: Date = now()
    - location: String? #max(50)
    - storage_class: Standard | InfrequentAccess = Standard
    - updated_at: Date = now()

- name: Cloudflare R2 Object
  type: cf_r2_object
  id: [bucket_id, key]
  schema:
    - bucket_id: Id #required -> CfR2Bucket.id
    - custom_metadata: String? # JSON
    - etag: String? #max(255)
    - http_etag: String? #max(255)
    - key: String #required #max(1024)
    - size: int? #min(0)
    - storage_class: Standard | InfrequentAccess = Standard
    - uploaded: Date?
    - version: String? #max(255)

- name: Cloudflare R2 Multipart Upload
  type: cf_r2_multipart_upload
  id: [bucket_id, key, upload_id]
  schema:
    - bucket_id: Id #required -> CfR2Bucket.id
    - completed_at: Date?
    - created_at: Date = now()
    - custom_metadata: String? # JSON
    - key: String #required #max(1024)
    - status: Initiated | InProgress | Completed | Aborted = Initiated
    - storage_class: Standard | InfrequentAccess = Standard
    - upload_id: String #required #unique #max(255)

- name: Cloudflare R2 Multipart Part
  type: cf_r2_multipart_part
  id: [upload_id, part_number]
  schema:
    - created_at: Date = now()
    - etag: String? #max(255)
    - part_number: int #required #min(1)
    - size: int? #min(0)
    - upload_id: Id #required -> CfR2MultipartUpload.id

