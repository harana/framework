- object: cf_r2_bucket
  id: [account_id, bucket_name]
  schema:
    - account_id: string #max(50)
    - bucket_name: string #unique #max(63)
    - created_at: date = now()
    - location: string? #max(50)
    - storage_class: standard | infrequent_access = standard
    - updated_at: date = now()

- object: cf_r2_object
  id: [bucket_id, key]
  schema:
    - bucket_id: id -> cf_r2_bucket.id
    - custom_metadata: string? # json
    - etag: string? #max(255)
    - http_etag: string? #max(255)
    - key: string #max(1024)
    - size: int? #min(0)
    - storage_class: standard | infrequent_access = standard
    - uploaded: date?
    - version: string? #max(255)

- object: cf_r2_multipart_upload
  id: [bucket_id, key, upload_id]
  schema:
    - bucket_id: id -> cf_r2_bucket.id
    - completed_at: date?
    - created_at: date = now()
    - custom_metadata: string? # json
    - key: string #max(1024)
    - status: initiated | in_progress | completed | aborted = initiated
    - storage_class: standard | infrequent_access = standard
    - upload_id: string #unique #max(255)

- object: cf_r2_multipart_part
  id: [upload_id, part_number]
  schema:
    - created_at: date = now()
    - etag: string? #max(255)
    - part_number: int #min(1)
    - size: int? #min(0)
    - upload_id: id -> cf_r2_multipart_upload.id

