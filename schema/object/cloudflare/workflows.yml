- name: Cloudflare Workflow
  type: cf_workflow
  id: [account_id, workflow_name]
  schema:
    - account_id: String #required #max(50)
    - binding: String #required #max(255)
    - class_name: String? #max(255)
    - created_at: Date = now()
    - script_name: String? #max(255)
    - updated_at: Date = now()
    - workflow_name: String #required #unique #max(255)

- name: Cloudflare Workflow Instance
  type: cf_workflow_instance
  id: [workflow_id, instance_id]
  schema:
    - created_at: Date = now()
    - error: String?
    - instance_id: String #required #unique #max(255)
    - output: String? # JSON
    - params: String? # JSON
    - status: Queued | Running | Paused | Errored | Terminated | Complete | Waiting | WaitingForPause | Unknown = Queued
    - updated_at: Date = now()
    - workflow_id: Id #required -> CfWorkflow.id

- name: Cloudflare Workflow Step
  type: cf_workflow_step
  id: [instance_id, step_name]
  schema:
    - completed_at: Date?
    - created_at: Date = now()
    - instance_id: Id #required -> CfWorkflowInstance.id
    - result: String? # JSON
    - retries_backoff: Constant | Linear | Exponential = Constant
    - retries_delay: String? #max(50)
    - retries_limit: int? #min(0)
    - started_at: Date?
    - status: Pending | Running | Completed | Failed | Sleeping | WaitingForEvent = Pending
    - step_name: String #required #max(255)
    - step_type: Do | Sleep | SleepUntil | WaitForEvent = Do
    - timeout: String? #max(50)

- name: Cloudflare Workflow Event
  type: cf_workflow_event
  id: [instance_id, event_type, sent_at]
  schema:
    - event_type: String #required #max(255)
    - instance_id: Id #required -> CfWorkflowInstance.id
    - payload: String? # JSON
    - sent_at: Date = now()

