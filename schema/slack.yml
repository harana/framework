- name: slack_workspace
  schema:
    - access_token: string? #max(500) #encrypted
    - created_at: date = now()
    - is_active: boolean = true
    - team_id: string #required #unique #max(100)
    - team_name: string? #max(200)
    - updated_at: date = now()

- name: slack_channel
  id: [workspace_id, channel_id]
  schema:
    - channel_id: string #required #max(100)
    - is_archived: boolean = false
    - is_private: boolean = false
    - name: string #required #max(200)
    - num_members: int = 0 #min(0)
    - purpose: string? #max(500)
    - topic: string? #max(500)
    - workspace_id: id #required -> slack_workspace.id
- name: slack_user
  id: [workspace_id, user_id]
  schema:
    - email: string? #email #max(255)
    - is_admin: boolean = false
    - is_bot: boolean = false
    - name: string? #max(200)
    - real_name: string? #max(200)
    - timezone: string? #max(50)
    - user_id: string #required #max(100)
    - workspace_id: id #required -> slack_workspace.id
- name: slack_message_log
  id: [channel_id, message_ts]
  schema:
    - channel_id: string #required #max(100)
    - created_at: date = now()
    - message_ts: string #required #max(50)
    - status: sent | updated | deleted | failed = sent
    - text: string? #max(5000)
    - thread_ts: string? #max(50)
    - user_id: string? #max(100)

- name: slack_message
  schema:
    - message_ts: string
    - channel_id: string
    - text: string
    - user_id: string
    - thread_ts: string
    - blocks: list[slack_block]
    - attachments: list[slack_attachment]

- name: slack_block
  schema:
    - type: string
    - block_id: string
    - text: slack_text_object
    - elements: list[any]

- name: slack_text_object
  schema:
    - type: string
    - text: string
    - emoji: boolean

- name: slack_attachment
  schema:
    - fallback: string
    - color: string
    - pretext: string
    - title: string
    - title_link: string
    - text: string
    - fields: list[slack_attachment_field]

- name: slack_attachment_field
  schema:
    - title: string
    - value: string
    - short: boolean
