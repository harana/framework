- name: Create Topic
  action: create_topic
  inputs:
    labels: PubSubLabels
    message_retention_duration: String
    project_id: String #required
    schema_settings: PubSubSchemaSettings
    topic_id: String #required
  outputs:
    success: Boolean
    topic_name: String

- name: Delete Topic
  action: delete_topic
  inputs:
    project_id: String #required
    topic_id: String #required
  outputs:
    success: Boolean

- name: Get Topic
  action: get_topic
  inputs:
    project_id: String #required
    topic_id: String #required
  outputs:
    labels: PubSubLabels
    message_retention_duration: String
    schema_settings: PubSubSchemaSettings
    topic_name: String

- name: List Topics
  action: list_topics
  inputs:
    page_size: Int = 100
    page_token: String
    project_id: String #required
  outputs:
    next_page_token: String
    topics: List[PubSubTopic]

- name: Publish Message
  action: publish
  inputs:
    attributes: PubSubMessageAttributes
    data: String #required
    ordering_key: String
    project_id: String #required
    topic_id: String #required
  outputs:
    message_id: String
    success: Boolean

- name: Publish Batch Messages
  action: publish_batch
  inputs:
    messages: List[PubSubPublishMessage] #required
    project_id: String #required
    topic_id: String #required
  outputs:
    failure_count: Int
    message_ids: List[String]
    success_count: Int

- name: Create Subscription
  action: create_subscription
  inputs:
    ack_deadline_seconds: Int = 10
    dead_letter_policy: DeadLetterPolicy
    enable_message_ordering: Boolean = false
    filter: String
    message_retention_duration: String
    project_id: String #required
    push_config: PushConfig
    retain_acked_messages: Boolean = false
    retry_policy: RetryPolicy
    subscription_id: String #required
    topic_id: String #required
  outputs:
    subscription_name: String
    success: Boolean

- name: Delete Subscription
  action: delete_subscription
  inputs:
    project_id: String #required
    subscription_id: String #required
  outputs:
    success: Boolean

- name: Get Subscription
  action: get_subscription
  inputs:
    project_id: String #required
    subscription_id: String #required
  outputs:
    ack_deadline_seconds: Int
    labels: PubSubLabels
    message_retention_duration: String
    push_config: PushConfig
    subscription_name: String
    topic: String

- name: List Subscriptions
  action: list_subscriptions
  inputs:
    page_size: Int = 100
    page_token: String
    project_id: String #required
  outputs:
    next_page_token: String
    subscriptions: List[PubSubSubscription]

- name: Pull Messages
  action: pull
  inputs:
    max_messages: Int = 10
    project_id: String #required
    return_immediately: Boolean = false
    subscription_id: String #required
  outputs:
    count: Int
    messages: List[PubSubReceivedMessage]

- name: Acknowledge Messages
  action: acknowledge
  inputs:
    ack_ids: List[String] #required
    project_id: String #required
    subscription_id: String #required
  outputs:
    success: Boolean

- name: Modify Ack Deadline
  action: modify_ack_deadline
  inputs:
    ack_deadline_seconds: Int #required
    ack_ids: List[String] #required
    project_id: String #required
    subscription_id: String #required
  outputs:
    success: Boolean

- name: Seek Subscription
  action: seek
  inputs:
    project_id: String #required
    snapshot: String
    subscription_id: String #required
    time: Date
  outputs:
    success: Boolean

- name: Create Snapshot
  action: create_snapshot
  inputs:
    labels: PubSubLabels
    project_id: String #required
    snapshot_id: String #required
    subscription_id: String #required
  outputs:
    expire_time: Date
    snapshot_name: String
    success: Boolean
    topic: String

- name: Delete Snapshot
  action: delete_snapshot
  inputs:
    project_id: String #required
    snapshot_id: String #required
  outputs:
    success: Boolean

- name: List Topic Subscriptions
  action: list_topic_subscriptions
  inputs:
    page_size: Int = 100
    page_token: String
    project_id: String #required
    topic_id: String #required
  outputs:
    next_page_token: String
    subscriptions: List[String]

- name: Update Topic
  action: update_topic
  inputs:
    labels: PubSubLabels
    message_retention_duration: String
    project_id: String #required
    topic_id: String #required
  outputs:
    success: Boolean

- name: Update Subscription
  action: update_subscription
  inputs:
    ack_deadline_seconds: Int
    labels: PubSubLabels
    message_retention_duration: String
    project_id: String #required
    push_config: PushConfig
    subscription_id: String #required
  outputs:
    success: Boolean

- name: PubSubMessage
  class:
    message_id: String
    data: String
    attributes: PubSubMessageAttributes
    publish_time: Date
    ordering_key: String

- name: PubSubLabels
  class:
    labels: List[PubSubLabel]

- name: PubSubLabel
  class:
    key: String
    value: String

- name: PubSubSchemaSettings
  class:
    schema: String
    encoding: String

- name: PubSubTopic
  class:
    name: String
    labels: PubSubLabels
    message_retention_duration: String

- name: PubSubMessageAttributes
  class:
    attributes: List[PubSubMessageAttribute]

- name: PubSubMessageAttribute
  class:
    key: String
    value: String

- name: PubSubPublishMessage
  class:
    data: String
    attributes: PubSubMessageAttributes
    ordering_key: String

- name: DeadLetterPolicy
  class:
    dead_letter_topic: String
    max_delivery_attempts: Int

- name: PushConfig
  class:
    push_endpoint: String
    attributes: PubSubMessageAttributes
    oidc_token: OidcToken

- name: OidcToken
  class:
    service_account_email: String
    audience: String

- name: RetryPolicy
  class:
    minimum_backoff: String
    maximum_backoff: String

- name: PubSubSubscription
  class:
    name: String
    topic: String
    ack_deadline_seconds: Int
    message_retention_duration: String
    labels: PubSubLabels

- name: PubSubReceivedMessage
  class:
    ack_id: String
    message: PubSubMessage
    delivery_attempt: Int
