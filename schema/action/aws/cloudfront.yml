- action: create_distribution
  inputs:
    origin_domain_name: string
    origin_id: string
    default_root_object: string = "index.html"
    enabled: boolean = true
    price_class: priceclass_all | priceclass200 | priceclass100 = priceclass_all
    aliases: list[string]
    certificate_arn: string
    ssl_support_method: sni-only | vip | static-ip
    minimum_protocol_version: tlsv1.2_2021 | tlsv1.2_2019 | tlsv1.2_2018 = tlsv1.2_2021
    default_cache_behavior: cache_behavior
    cache_behaviors: list[cache_behavior]
    custom_error_responses: list[custom_error_response]
    comment: string
    tags: cloud_front_tags
  outputs:
    distribution_id: string
    domain_name: string
    arn: string
    status: string
    success: boolean

- action: get_distribution
  inputs:
    distribution_id: string
  outputs:
    distribution_id: string
    domain_name: string
    arn: string
    status: string
    enabled: boolean
    aliases: list[string]
    origins: list[cloud_front_origin]
    default_cache_behavior: cache_behavior
    cache_behaviors: list[cache_behavior]
    price_class: string
    last_modified_time: date

- action: update_distribution
  inputs:
    distribution_id: string
    if_match: string
    enabled: boolean
    default_root_object: string
    aliases: list[string]
    default_cache_behavior: cache_behavior
    cache_behaviors: list[cache_behavior]
    custom_error_responses: list[custom_error_response]
    comment: string
  outputs:
    distribution_id: string
    status: string
    success: boolean

- action: delete_distribution
  inputs:
    distribution_id: string
    if_match: string
  outputs:
    success: boolean

- action: list_distributions
  inputs:
    max_items: int = 100
    marker: string
  outputs:
    distributions: list[cloud_front_distribution]
    next_marker: string
    is_truncated: boolean

- action: create_invalidation
  inputs:
    distribution_id: string
    paths: list[string]
    caller_reference: string
  outputs:
    invalidation_id: string
    status: string
    create_time: date
    success: boolean

- action: get_invalidation
  inputs:
    distribution_id: string
    invalidation_id: string
  outputs:
    invalidation_id: string
    status: string
    create_time: date
    paths: list[string]

- action: list_invalidations
  inputs:
    distribution_id: string
    max_items: int = 100
    marker: string
  outputs:
    invalidations: list[cloud_front_invalidation]
    next_marker: string
    is_truncated: boolean

- action: create_cache_policy
  inputs:
    name: string
    default_ttl: int = 86400
    max_ttl: int = 31536000
    min_ttl: int = 0
    parameters_in_cache_key_and_forwarded_to_origin: cache_key_parameters
    comment: string
  outputs:
    cache_policy_id: string
    etag: string
    success: boolean

- action: get_cache_policy
  inputs:
    cache_policy_id: string
  outputs:
    cache_policy_id: string
    name: string
    default_ttl: int
    max_ttl: int
    min_ttl: int
    parameters_in_cache_key: cache_key_parameters
    etag: string

- action: delete_cache_policy
  inputs:
    cache_policy_id: string
    if_match: string
  outputs:
    success: boolean

- action: list_cache_policies
  inputs:
    type: managed | custom = custom
    max_items: int = 100
    marker: string
  outputs:
    cache_policies: list[cache_policy]
    next_marker: string

- action: create_origin_request_policy
  inputs:
    name: string
    headers_config: headers_config
    cookies_config: cookies_config
    query_strings_config: query_strings_config
    comment: string
  outputs:
    origin_request_policy_id: string
    etag: string
    success: boolean

- action: create_response_headers_policy
  inputs:
    name: string
    cors_config: cors_config
    security_headers_config: security_headers_config
    custom_headers_config: custom_headers_config
    comment: string
  outputs:
    response_headers_policy_id: string
    etag: string
    success: boolean

- action: create_function
  inputs:
    name: string
    runtime: cloudfront-js-1.0 | cloudfront-js-2.0 = cloudfront-js-2.0
    function_code: string
    comment: string
  outputs:
    function_name: string
    function_arn: string
    etag: string
    status: string
    success: boolean

- action: publish_function
  inputs:
    name: string
    if_match: string
  outputs:
    function_arn: string
    status: string
    success: boolean

- action: get_distribution_config
  inputs:
    distribution_id: string
  outputs:
    distribution_config: distribution_config
    etag: string

- action: tag_resource
  inputs:
    resource_arn: string
    tags: cloud_front_tags
  outputs:
    success: boolean

- action: list_tags_for_resource
  inputs:
    resource_arn: string
  outputs:
    tags: cloud_front_tags

- object: distribution
  id: [account_id, distribution_id]
  schema:
    - account_id: string #max(20)
    - aliases: string? # json list
    - arn: string? #max(255)
    - certificate_arn: string? #max(255)
    - comment: string? #max(500)
    - created_at: date = now()
    - default_root_object: string? #max(255)
    - distribution_id: string #unique #max(30)
    - domain_name: string? #max(255)
    - enabled: boolean = true
    - http_version: http1.1 | http2 | http3 | http2and3 = http2
    - last_modified_time: date?
    - origin_domain_name: string #max(255)
    - origin_id: string #max(128)
    - price_class: price_class_all | price_class200 | price_class100 = price_class_all
    - region: string? #max(50)
    - ssl_support_method: sni_only | vip | static_ip = sni_only
    - status: deployed | in_progress = in_progress
    - tags: string? # json
    - updated_at: date = now()

- object: invalidation
  id: [distribution_id, invalidation_id]
  schema:
    - create_time: date = now()
    - distribution_id: id -> aws_cloudfront_distribution.id
    - invalidation_id: string #unique #max(30)
    - paths: string # json list
    - status: in_progress | completed = in_progress

- object: cache_policy
  id: [account_id, cache_policy_id]
  schema:
    - account_id: string #max(20)
    - cache_policy_id: string #unique #max(30)
    - comment: string? #max(500)
    - created_at: date = now()
    - default_ttl: int = 86400 #min(0)
    - etag: string? #max(255)
    - max_ttl: int = 31536000 #min(0)
    - min_ttl: int = 0 #min(0)

    - name: string #max(128)
    - parameters_in_cache_key: string? # json
    - updated_at: date = now()

- object: origin_request_policy
  id: [account_id, origin_request_policy_id]
  schema:
    - account_id: string #max(20)
    - comment: string? #max(500)
    - cookies_config: string? # json
    - created_at: date = now()
    - etag: string? #max(255)
    - headers_config: string? # json

    - name: string #max(128)
    - origin_request_policy_id: string #unique #max(30)
    - query_strings_config: string? # json
    - updated_at: date = now()

- object: function
  id: [account_id, function_name]
  schema:
    - account_id: string #max(20)
    - created_at: date = now()
    - etag: string? #max(255)
    - function_arn: string? #max(255)
    - function_name: string #unique #max(64)
    - runtime: cloudfront_js10 | cloudfront_js20 = cloudfront_js20
    - status: unpublished | unassociated | deployed = unpublished
    - updated_at: date = now()
