- action: generate_text
  inputs:
    max_tokens: int = 1000
    model: string = "default"
    prompt: string
    temperature: float = 0.7
  outputs:
    text: string
    tokens_used: int

- action: chat_completion
  inputs:
    max_tokens: int = 1000
    messages: list[ai_chat_message]
    model: string = "default"
    system_prompt: string
    temperature: float = 0.7
  outputs:
    response: string
    tokens_used: int

- action: generate_embeddings
  inputs:
    model: string = "default"
    text: string
  outputs:
    dimensions: int
    embeddings: list[float]

- action: generate_image
  inputs:
    model: string = "default"
    prompt: string
    quality: standard | hd = standard
    size: string = "1024x1024"
  outputs:
    base64: string
    url: string

- action: transcribe_audio
  inputs:
    audio: bytes
    language: string
    model: string = "default"
  outputs:
    duration: float
    text: string

- action: classify_text
  inputs:
    labels: list[string]
    model: string = "default"
    text: string
  outputs:
    confidence: float
    label: string
    scores: map[string, float]

- action: summarize_text
  inputs:
    max_length: int = 500
    model: string = "default"
    text: string
  outputs:
    summary: string

- action: extract_entities
  inputs:
    entity_types: list[string]
    model: string = "default"
    text: string
  outputs:
    entities: list[ai_entity]

- action: onnx_load_model
  inputs:
    model_path: string
    optimize: boolean = true
  outputs:
    input_shapes: list[ai_tensor_shape]
    model_id: string
    output_shapes: list[ai_tensor_shape]

- action: onnx_inference
  inputs:
    input_data: map[string, any]
    model_id: string
  outputs:
    inference_time_ms: float
    outputs: map[string, any]

- action: onnx_inference_bytes
  inputs:
    input_data: map[string, any]
    model_bytes: bytes
    optimize: boolean = true
  outputs:
    inference_time_ms: float
    outputs: map[string, any]

- action: onnx_model_info
  inputs:
    model_path: string
  outputs:
    input_names: list[string]
    input_shapes: list[ai_tensor_shape]
    output_names: list[string]
    output_shapes: list[ai_tensor_shape]

- action: onnx_unload_model
  inputs:
    model_id: string
  outputs:
    success: boolean

- action: onnx_classify_image
  inputs:
    image: bytes
    labels: list[string]
    model_id: string
    top_k: int = 5
  outputs:
    inference_time_ms: float
    predictions: list[ai_classification_prediction]

- action: onnx_detect_objects
  inputs:
    confidence_threshold: float = 0.5
    image: bytes
    labels: list[string]
    model_id: string
    nms_threshold: float = 0.4
  outputs:
    detections: list[ai_object_detection]
    inference_time_ms: float

- action: onnx_text_embedding
  inputs:
    model_id: string
    text: string
  outputs:
    dimensions: int
    embedding: list[float]
    inference_time_ms: float

- object: model
  class:
    model_id: string
    name: string
    provider: string
    max_tokens: int
    temperature: float
    capabilities: list[string]

- object: chat_message
  class:
    role: string
    content: string

- object: entity
  class:
    text: string
    type: string
    start: int
    end: int
    confidence: float

- object: tensor_shape
  class:
    name: string
    dtype: string
    shape: list[integer]

- object: classification_prediction
  class:
    label: string
    confidence: float
    index: int

- object: object_detection
  class:
    label: string
    confidence: float
    x: float
    y: float
    width: float
    height: float

- object: model
  id: [name, version]
  schema:
    - context_window: int? #min(1)
    - created_at: date = now()
    - description: string? #max(1000)
    - is_active: boolean = true
    - max_output_tokens: int? #min(1)
    - provider: openai | anthropic | google | aws | azure | local = openai
    - type: chat | completion | embedding | image | audio | vision = chat
    - updated_at: date = now()
    - version: string #max(50)

- object: model_config
  id: [model_id, name]
  schema:
    - frequency_penalty: decimal = 0 #min(-2) #max(2)
    - max_tokens: int? #min(1)
    - model_id: id -> ai_model.id
    - presence_penalty: decimal = 0 #min(-2) #max(2)
    - stop_sequences: string?
    - temperature: decimal = 1.0 #min(0) #max(2)
    - top_p: decimal = 1.0 #min(0) #max(1)

- object: prompt_template
  schema:
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - model_id: id? -> ai_model.id
    - system_prompt: string?
    - template: string
    - updated_at: date = now()
    - variables: string?

- object: conversation
  id: [user_id, created_at]
  schema:
    - created_at: date = now()
    - metadata: string?
    - model_id: id -> ai_model.id
    - status: active | archived | deleted = active
    - title: string? #max(200)
    - updated_at: date = now()
    - user_id: id -> user.id

- object: message
  id: [conversation_id, created_at]
  schema:
    - content: string
    - conversation_id: id -> ai_conversation.id
    - created_at: date = now()
    - metadata: string?
    - role: system | user | assistant | function | tool = user
    - tokens_used: int? #min(0)

- object: embedding
  id: [model_id, source_id, source_type]
  schema:
    - content: string
    - created_at: date = now()
    - dimensions: int #min(1)
    - metadata: string?
    - model_id: id -> ai_model.id
    - source_id: string? #max(200)
    - source_type: string? #max(100)
    - vector: string

- object: usage
  id: [model_id, created_at, user_id]
  schema:
    - completion_tokens: int = 0 #min(0)
    - cost: decimal? #min(0)
    - created_at: date = now()
    - model_id: id -> ai_model.id
    - prompt_tokens: int = 0 #min(0)
    - request_type: chat | completion | embedding | image | audio = chat
    - total_tokens: int = 0 #min(0)
    - user_id: id? -> user.id

- object: chat_message
  schema:
    - role: string
    - content: string

- object: entity
  schema:
    - text: string
    - type: string
    - start: int
    - end: int
    - confidence: float

- object: tensor_shape
  schema:
    - name: string
    - dtype: string
    - shape: list[integer]

- object: classification_prediction
  schema:
    - label: string
    - confidence: float
    - index: int

- object: object_detection
  schema:
    - label: string
    - confidence: float
    - x: float
    - y: float
    - width: float
    - height: float
