- action: send
  inputs:
    attachments: list[email_attachment]
    bcc: list[string]
    body: string
    cc: list[string]
    content_type: text | html = text
    from: string
    reply_to: string
    subject: string
    to: list[string]
  outputs:
    message_id: string
    success: boolean

- action: send_template
  inputs:
    attachments: list[email_attachment]
    bcc: list[string]
    cc: list[string]
    from: string
    reply_to: string
    template_id: string
    to: list[string]
    variables: map[string, string]
  outputs:
    message_id: string
    success: boolean

- action: validate_email
  inputs:
    check_mx: boolean = false
    check_smtp: boolean = false
    email: string
  outputs:
    reason: string
    valid: boolean

- action: status
  inputs:
    message_id: string
  outputs:
    clicked_at: date
    delivered_at: date
    error: string
    opened_at: date
    status: queued | sent | delivered | bounced | failed

- action: send_bulk
  inputs:
    body: string
    content_type: text | html = text
    from: string
    recipients: list[email_recipient]
    subject: string
  outputs:
    failed: int
    message_ids: list[string]
    successful: int
    total: int

- action: create_template
  inputs:
    body: string
    content_type: text | html = html
    name: string
    subject: string
    variables: list[string]
  outputs:
    success: boolean
    template_id: string

- action: delete_template
  inputs:
    template_id: string
  outputs:
    success: boolean

- action: list_templates
  inputs:
    limit: int = 100
    offset: int = 0
  outputs:
    templates: list[email_template]
    total: int

- object: message
  class:
    message_id: string
    from: string
    to: list[string]
    cc: list[string]
    bcc: list[string]
    subject: string
    body: string
    content_type: string
    attachments: list[email_attachment]
    status: string

- object: attachment
  class:
    filename: string
    content_type: string
    content: bytes
    size: int

- object: recipient
  class:
    email: string
    name: string
    variables: map[string, string]

- object: template
  class:
    template_id: string
    name: string
    subject: string
    body: string
    content_type: string
    variables: list[string]

- object: template
  schema:
    - body_html: string
    - body_text: string?
    - created_at: date = now()
    - is_active: boolean = true
    - subject: string #max(500)
    - updated_at: date = now()

- object: email
  id: [from_address, to_address, created_at]
  schema:
    - bcc: string? #email
    - body_html: string?
    - body_text: string?
    - cc: string? #email
    - created_at: date = now()
    - from_address: string #email
    - reply_to: string? #email
    - sent_at: date?
    - status: pending | sent | failed | bounced = pending
    - subject: string #max(500)
    - template_id: id? -> email_template.id
    - to_address: string #email
    - updated_at: date = now()

- object: attachment
  id: [email_id, file_name]
  schema:
    - content_type: string #max(100)
    - email_id: id -> email.id

- object: message
  schema:
    - message_id: string
    - from: string
    - to: list[string]
    - cc: list[string]
    - bcc: list[string]
    - subject: string
    - body: string
    - content_type: string
    - attachments: list[email_attachment]
    - status: string

- object: recipient
  schema:
    - email: string

    - name: string
    - variables: map[string, string]
