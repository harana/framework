- action: parse
  inputs:
    data: string
    preserve_attributes: boolean = true
    preserve_namespaces: boolean = false
  outputs:
    result: xml_object

- action: generate
  inputs:
    data: xml_object
    declaration: boolean = true
    indent: boolean = true
    root_element: string = "root"
  outputs:
    xml: string

- action: validate
  inputs:
    data: string
    schema: string
  outputs:
    errors: list[xml_validation_error]
    valid: boolean

- action: xpath_query
  inputs:
    data: string
    namespaces: xml_namespaces
    query: string
  outputs:
    results: list[any]

- object: xml_document
  class:
    content: string
    root_element: string
    namespaces: xml_namespaces
    encoding: string

- object: xml_object
  class:
    elements: map[string, any]
    attributes: map[string, string]

- object: xml_validation_error
  class:
    line: int
    column: int
    message: string

- object: xml_namespaces
  class:
    namespaces: list[xml_namespace]

- object: xml_namespace
  class:
    prefix: string
    uri: string

- object: xml_document
  schema:
    - charset: string = utf-8 #max(20)
    - created_at: date = now()
    - created_by: id? -> user.id
    - root_element: string? #max(255)
    - size: int = 0 #min(0)
    - source_path: string? #max(2000)
    - updated_at: date = now()

- object: xml_schema
  schema:
    - content: string
    - created_at: date = now()
    - description: string? #max(500)
    - is_active: boolean = true
    - schema_type: xsd | dtd | relax_ng = xsd
    - updated_at: date = now()
    - version: int = 1 #min(1)

- object: xml_validation_result
  id: [document_id, validated_at]
  schema:
    - document_id: id -> xml_document.id
    - error_count: int = 0 #min(0)
    - errors: string? # json array
    - is_valid: boolean = false
    - schema_id: id -> xml_schema.id
    - validated_at: date = now()

- object: xml_object
  schema:
    - elements: map[string, any]
    - attributes: map[string, string]

- object: xml_validation_error
  schema:
    - line: int
    - column: int
    - message: string

- object: xml_namespaces
  schema:
    - namespaces: list[xml_namespace]

- object: xml_namespace
  schema:
    - prefix: string
    - uri: string
