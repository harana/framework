- action: debug
  inputs:
    context: log_context
    message: string
  outputs:
    success: boolean

- action: info
  inputs:
    context: log_context
    message: string
  outputs:
    success: boolean

- action: warn
  inputs:
    context: log_context
    message: string
  outputs:
    success: boolean

- action: error
  inputs:
    context: log_context
    error: log_error
    message: string
  outputs:
    success: boolean

- action: structured
  inputs:
    data: log_data
    level: debug | info | warn | error
  outputs:
    success: boolean

- object: log_entry
  class:
    level: string
    message: string
    timestamp: date
    context: log_context
    error: log_error

- object: log_context
  class:
    request_id: string
    user_id: string
    trace_id: string
    span_id: string

- object: log_error
  class:
    message: string
    stack_trace: string
    code: string

- object: log_data
  class:
    key: string
    value: any

- object: log_entry
  id: [source, created_at]
  schema:
    - created_at: date = now()
    - level: debug | info | warn | error = info
    - message: string #max(5000)
    - metadata: string?
    - request_id: string? #max(200)
    - source: string? #max(200)
    - span_id: string? #max(64)
    - trace_id: string? #max(64)
    - user_id: id? -> user.id

- object: log_error
  id: [log_entry_id]
  schema:
    - code: string? #max(100)
    - log_entry_id: id -> log_entry.id
    - message: string #max(2000)
    - stack_trace: string?

- object: log_config
  id: [source]
  schema:
    - is_enabled: boolean = true
    - level: debug | info | warn | error = info
    - max_retention_days: int = 30 #min(1)
    - source: string #unique #max(200)
    - updated_at: date = now()

- object: log_context
  schema:
    - request_id: string
    - user_id: string
    - trace_id: string
    - span_id: string

- object: log_data
  schema:
    - key: string
    - value: any
