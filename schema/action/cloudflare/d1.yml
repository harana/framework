- action: exec
  inputs:
    database: string
    sql: string
  outputs:
    changes: int
    duration: float
    last_row_id: int
    rows_read: int
    rows_written: int
    success: boolean

- action: prepare
  inputs:
    database: string
    sql: string
  outputs:
    statement: d1_prepared_statement
    success: boolean

- action: run
  inputs:
    bind_values: list[any]
    database: string
    sql: string
  outputs:
    changes: int
    duration: float
    last_row_id: int
    results: list[any]
    rows_read: int
    rows_written: int
    success: boolean

- action: first
  inputs:
    bind_values: list[any]
    column: string
    database: string
    sql: string
  outputs:
    result: any

- action: all
  inputs:
    bind_values: list[any]
    database: string
    sql: string
  outputs:
    changes: int
    duration: float
    last_row_id: int
    results: list[any]
    rows_read: int
    rows_written: int
    success: boolean

- action: raw
  inputs:
    bind_values: list[any]
    database: string
    sql: string
  outputs:
    columns: list[string]
    rows: list[list[any]]

- action: batch
  inputs:
    database: string
    statements: list[d1_batch_statement]
  outputs:
    results: list[d1_batch_result]
    success: boolean

- action: dump
  inputs:
    database: string
  outputs:
    data: bytes
    success: boolean

- object: database
  id: [account_id, database_name]
  schema:
    - account_id: string #max(50)
    - created_at: date = now()
    - database_id: string? #unique #max(255)
    - database_name: string #unique #max(255)
    - file_size: int = 0 #min(0)
    - num_tables: int = 0 #min(0)
    - region: string? #max(50)
    - updated_at: date = now()
    - version: string? #max(50)

- object: query_log
  id: [database_id, executed_at]
  schema:
    - changes: int = 0 #min(0)
    - database_id: id -> cf_d1_database.id
    - duration_ms: float? #min(0)
    - executed_at: date = now()
    - last_row_id: int?
    - rows_read: int = 0 #min(0)
    - rows_written: int = 0 #min(0)
    - sql: string
    - status: success | error = success

