- action: run
  inputs:
    binding: string
    model: string
    params: any
    stream: boolean = false
  outputs:
    response: any

- action: text_generation
  inputs:
    binding: string
    frequency_penalty: float
    max_tokens: int = 256
    messages: list[workers_ai_message]
    model: string
    presence_penalty: float
    prompt: string
    repetition_penalty: float
    stream: boolean = false
    temperature: float = 0.6
    top_k: int
    top_p: float
  outputs:
    response: string

- action: text_embeddings
  inputs:
    binding: string
    model: string
    text: list[string]
  outputs:
    data: list[list[float]]
    shape: list[int]

- action: text_classification
  inputs:
    binding: string
    model: string
    text: string
  outputs:
    labels: list[workers_ai_classification]

- action: translation
  inputs:
    binding: string
    model: string
    source_lang: string
    target_lang: string
    text: string
  outputs:
    translated_text: string

- action: image_classification
  inputs:
    binding: string
    image: bytes
    model: string
  outputs:
    labels: list[workers_ai_classification]

- action: object_detection
  inputs:
    binding: string
    image: bytes
    model: string
  outputs:
    detections: list[workers_ai_detection]

- action: text_to_image
  inputs:
    binding: string
    guidance: float = 7.5
    height: int
    model: string
    num_steps: int = 20
    prompt: string
    width: int
  outputs:
    image: bytes

- action: speech_recognition
  inputs:
    audio: bytes
    binding: string
    model: string
    source_lang: string
  outputs:
    text: string
    vtt: string
    word_count: int
    words: list[workers_ai_word]

- action: text_to_speech
  inputs:
    binding: string
    model: string
    text: string
  outputs:
    audio: bytes

- action: summarization
  inputs:
    binding: string
    input_text: string
    max_length: int = 1024
    model: string
  outputs:
    summary: string

- action: image_to_text
  inputs:
    binding: string
    image: bytes
    max_tokens: int = 512
    model: string
    prompt: string
  outputs:
    description: string

- object: model
  id: [account_id, model_name]
  schema:
    - account_id: string #max(50)
    - created_at: date = now()
    - model_name: string #unique #max(255)
    - task_type: text_generation | text_embeddings | text_classification | translation | image_classification | object_detection | text_to_image | speech_recognition | text_to_speech | summarization | image_to_text
    - updated_at: date = now()

- object: inference
  id: [model_id, invoked_at]
  schema:
    - binding: string #max(255)
    - created_at: date = now()
    - duration_ms: int? #min(0)
    - input_tokens: int? #min(0)
    - invoked_at: date = now()
    - model_id: id -> cf_workers_ai_model.id
    - output_tokens: int? #min(0)
    - status: success | error | timeout = success
    - stream: boolean = false

