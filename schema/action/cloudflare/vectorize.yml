- action: insert
  inputs:
    index: string
    vectors: list[vectorize_vector]
  outputs:
    count: int
    mutation_id: string
    success: boolean

- action: upsert
  inputs:
    index: string
    vectors: list[vectorize_vector]
  outputs:
    count: int
    mutation_id: string
    success: boolean

- action: query
  inputs:
    filter: vectorize_filter
    index: string
    namespace: string
    return_metadata: none | indexed | all = none
    return_values: boolean = false
    top_k: int = 5
    vector: list[float]
  outputs:
    count: int
    matches: list[vectorize_match]

- action: query_by_id
  inputs:
    filter: vectorize_filter
    index: string
    namespace: string
    return_metadata: none | indexed | all = none
    return_values: boolean = false
    top_k: int = 5
    vector_id: string
  outputs:
    count: int
    matches: list[vectorize_match]

- action: get_by_ids
  inputs:
    ids: list[string]
    index: string
  outputs:
    vectors: list[vectorize_vector]

- action: delete_by_ids
  inputs:
    ids: list[string]
    index: string
  outputs:
    count: int
    mutation_id: string
    success: boolean

- action: describe
  inputs:
    index: string
  outputs:
    configured_dimensions: int
    description: string
    metric: cosine | euclidean | dot_product
    name: string
    vectors_count: int

- action: info
  inputs:
    index: string
  outputs:
    dimensions: int
    metric: cosine | euclidean | dot_product
    name: string
    vectors_count: int

- action: create_metadata_index
  inputs:
    index: string
    property_name: string
    type: string | number | boolean = string
  outputs:
    success: boolean

- action: delete_metadata_index
  inputs:
    index: string
    property_name: string
  outputs:
    success: boolean

- action: list_metadata_indexes
  inputs:
    index: string
  outputs:
    metadata_indexes: list[vectorize_metadata_index]

- object: index
  id: [account_id, index_name]
  schema:
    - account_id: string #max(50)
    - binding: string #max(255)
    - configured_dimensions: int #min(1)
    - created_at: date = now()
    - description: string? #max(500)
    - index_name: string #unique #max(255)
    - metric: cosine | euclidean | dot_product = cosine
    - updated_at: date = now()
    - vectors_count: int = 0 #min(0)

- object: vector
  id: [index_id, vector_id]
  schema:
    - created_at: date = now()
    - index_id: id -> cf_vectorize_index.id
    - metadata: string? # json
    - namespace: string? #max(255)
    - updated_at: date = now()
    - values: string? # json list of floats
    - vector_id: string #max(255)

- object: metadata_index
  id: [index_id, property_name]
  schema:
    - created_at: date = now()
    - index_id: id -> cf_vectorize_index.id
    - property_name: string #max(255)
    - type: string | number | boolean = string

