- name: Create Payment Intent
  method: create_payment_intent
  inputs:
    amount: Int #required
    capture_method: Automatic | Manual = Automatic
    confirm: Boolean = false
    currency: String #required
    customer_id: String
    description: String
    metadata: Map[String, String]
    payment_method: String
  outputs:
    amount: Int
    client_secret: String
    payment_intent_id: String
    status: String

- name: Confirm Payment Intent
  method: confirm_payment_intent
  inputs:
    payment_intent_id: String #required
    payment_method: String
  outputs:
    payment_intent_id: String
    status: String
    success: Boolean

- name: Capture Payment Intent
  method: capture_payment_intent
  inputs:
    amount_to_capture: Int
    payment_intent_id: String #required
  outputs:
    amount_captured: Int
    payment_intent_id: String
    status: String

- name: Cancel Payment Intent
  method: cancel_payment_intent
  inputs:
    cancellation_reason: Duplicate | Fraudulent | RequestedByCustomer | Abandoned
    payment_intent_id: String #required
  outputs:
    payment_intent_id: String
    status: String
    success: Boolean

- name: Create Customer
  method: create_customer
  inputs:
    description: String
    email: String
    metadata: Map[String, String]
    name: String
    payment_method: String
    phone: String
  outputs:
    created: Int
    customer_id: String
    email: String

- name: Update Customer
  method: update_customer
  inputs:
    customer_id: String #required
    description: String
    email: String
    metadata: Map[String, String]
    name: String
    phone: String
  outputs:
    customer_id: String
    success: Boolean

- name: Delete Customer
  method: delete_customer
  inputs:
    customer_id: String #required
  outputs:
    customer_id: String
    deleted: Boolean

- name: Get Customer
  method: get_customer
  inputs:
    customer_id: String #required
  outputs:
    created: Int
    customer_id: String
    email: String
    metadata: Map[String, String]
    name: String
    phone: String

- name: Create Subscription
  method: create_subscription
  inputs:
    customer_id: String #required
    metadata: Map[String, String]
    price_id: String #required
    quantity: Int = 1
    trial_period_days: Int
  outputs:
    current_period_end: Int
    status: String
    subscription_id: String

- name: Cancel Subscription
  method: cancel_subscription
  inputs:
    cancel_at_period_end: Boolean = false
    subscription_id: String #required
  outputs:
    canceled_at: Int
    status: String
    subscription_id: String

- name: Create Refund
  method: create_refund
  inputs:
    amount: Int
    metadata: Map[String, String]
    payment_intent_id: String #required
    reason: Duplicate | Fraudulent | RequestedByCustomer
  outputs:
    amount: Int
    refund_id: String
    status: String

- name: Create Price
  method: create_price
  inputs:
    currency: String #required
    metadata: Map[String, String]
    product_id: String #required
    recurring_interval: Day | Week | Month | Year
    recurring_interval_count: Int = 1
    unit_amount: Int #required
  outputs:
    currency: String
    price_id: String
    unit_amount: Int

- name: Create Product
  method: create_product
  inputs:
    active: Boolean = true
    description: String
    images: List[String]
    metadata: Map[String, String]
    name: String #required
  outputs:
    created: Int
    name: String
    product_id: String

- name: Create Checkout Session
  method: create_checkout_session
  inputs:
    cancel_url: String #required
    customer_email: String
    customer_id: String
    line_items: List[StripeLineItem] #required
    metadata: Map[String, String]
    mode: Payment | Subscription | Setup #required
    success_url: String #required
  outputs:
    session_id: String
    url: String

- name: Retrieve Payment Intent
  method: retrieve_payment_intent
  inputs:
    payment_intent_id: String #required
  outputs:
    amount: Int
    currency: String
    customer_id: String
    metadata: Map[String, String]
    payment_intent_id: String
    status: String

- name: List Customers
  method: list_customers
  inputs:
    ending_before: String
    limit: Int = 10
    starting_after: String
  outputs:
    customers: List[StripeCustomer]
    has_more: Boolean

- name: Create Payment Method
  method: create_payment_method
  inputs:
    billing_details: StripeBillingDetails
    card: StripeCard
    type: Card | BankAccount | UsBankAccount #required
  outputs:
    created: Int
    payment_method_id: String
    type: String

- name: Attach Payment Method
  method: attach_payment_method
  inputs:
    customer_id: String #required
    payment_method_id: String #required
  outputs:
    customer_id: String
    payment_method_id: String
    success: Boolean

- name: StripePaymentIntent
  class:
    payment_intent_id: String
    amount: Int
    currency: String
    status: String
    customer_id: String
    payment_method: String
    client_secret: String
    created: Date

- name: StripeLineItem
  class:
    price_id: String
    quantity: Int

- name: StripeCustomer
  class:
    customer_id: String
    email: String
    name: String
    phone: String
    created: Date
    metadata: Map[String, String]

- name: StripeBillingDetails
  class:
    name: String
    email: String
    phone: String
    address: StripeAddress

- name: StripeAddress
  class:
    line1: String
    line2: String
    city: String
    state: String
    postal_code: String
    country: String

- name: StripeCard
  class:
    number: String
    exp_month: Int
    exp_year: Int
    cvc: String
