- name: record_metric
  inputs:
    name: string #required
    tags: map[string, string]
    timestamp: date
    value: float #required
  outputs:
    success: boolean

- name: increment_counter
  inputs:
    amount: float = 1
    name: string #required
    tags: map[string, string]
  outputs:
    value: float

- name: set_gauge
  inputs:
    name: string #required
    tags: map[string, string]
    value: float #required
  outputs:
    success: boolean

- name: record_histogram
  inputs:
    buckets: list[float]
    name: string #required
    tags: map[string, string]
    value: float #required
  outputs:
    success: boolean

- name: start_timer
  inputs:
    name: string #required
    tags: map[string, string]
  outputs:
    timer_id: string

- name: stop_timer
  inputs:
    timer_id: string #required
  outputs:
    duration_ms: float
    success: boolean

- name: query_metrics
  inputs:
    aggregation: sum | avg | min | max | count = avg
    end_time: date
    interval: string = "1m"
    name: string #required
    start_time: date #required
    tags: map[string, string]
  outputs:
    datapoints: list[metric_datapoint]
    total: int

- name: get_metric_summary
  inputs:
    name: string #required
    period: string = "1h"
    tags: map[string, string]
  outputs:
    avg: float
    count: int
    max: float
    min: float
    p50: float
    p95: float
    p99: float
    sum: float

- name: list_metrics
  inputs:
    limit: int = 100
    prefix: string
  outputs:
    metrics: list[metric_info]
    total: int

- name: delete_metric
  inputs:
    before: date
    name: string #required
    tags: map[string, string]
  outputs:
    deleted_count: int
    success: boolean

- name: metric
  class:
    name: string
    value: float
    tags: map[string, string]
    timestamp: date
    type: string

- name: metric_datapoint
  class:
    timestamp: date
    value: float

- name: metric_info
  class:
    name: string
    type: string
    description: string
    tags: list[string]
