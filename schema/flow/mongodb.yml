- action: insert
  inputs:
    collection: string
    database: string
    document: mongo_document_data
  outputs:
    inserted_id: string

- action: insert_many
  inputs:
    collection: string
    database: string
    documents: list[mongo_document_data]
    ordered: boolean = true
  outputs:
    inserted_count: int
    inserted_ids: list[string]

- action: find_one
  inputs:
    collection: string
    database: string
    filter: mongo_filter
    projection: mongo_projection
  outputs:
    document: mongo_document_data
    found: boolean

- action: find
  inputs:
    collection: string
    database: string
    filter: mongo_filter = {}
    limit: int
    projection: mongo_projection
    skip: int = 0
    sort: mongo_sort
  outputs:
    count: int
    documents: list[mongo_document_data]

- action: update_one
  inputs:
    collection: string
    database: string
    filter: mongo_filter
    update: mongo_update
    upsert: boolean = false
  outputs:
    matched_count: int
    modified_count: int
    upserted_id: string

- action: update_many
  inputs:
    collection: string
    database: string
    filter: mongo_filter
    update: mongo_update
    upsert: boolean = false
  outputs:
    matched_count: int
    modified_count: int
    upserted_id: string

- action: replace_one
  inputs:
    collection: string
    database: string
    filter: mongo_filter
    replacement: mongo_document_data
    upsert: boolean = false
  outputs:
    matched_count: int
    modified_count: int
    upserted_id: string

- action: delete_one
  inputs:
    collection: string
    database: string
    filter: mongo_filter
  outputs:
    deleted_count: int

- action: delete_many
  inputs:
    collection: string
    database: string
    filter: mongo_filter
  outputs:
    deleted_count: int

- action: count
  inputs:
    collection: string
    database: string
    filter: mongo_filter = {}
  outputs:
    count: int

- action: aggregate
  inputs:
    collection: string
    database: string
    pipeline: list[mongo_pipeline_stage]
  outputs:
    documents: list[mongo_document_data]

- action: create_index
  inputs:
    collection: string
    database: string
    keys: mongo_index_keys
    name: string
    unique: boolean = false
  outputs:
    index_name: string

- action: drop_index
  inputs:
    collection: string
    database: string
    index_name: string

- action: list_collections
  inputs:
    database: string
  outputs:
    collections: list[string]

- action: drop_collection
  inputs:
    collection: string
    database: string

- action: bulk_write
  inputs:
    collection: string
    database: string
    operations: list[mongo_bulk_operation]
    ordered: boolean = true
  outputs:
    deleted_count: int
    inserted_count: int
    matched_count: int
    modified_count: int
    upserted_count: int

- object: mongo_document
  schema:
    _id: string
    collection: string
    database: string
    document: mongo_document_data

- object: mongo_document_data
  schema:
    data: map[string, any]

- object: mongo_filter
  schema:
    conditions: map[string, any]

- object: mongo_projection
  schema:
    fields: map[string, integer]

- object: mongo_sort
  schema:
    fields: map[string, integer]

- object: mongo_update
  schema:
    operators: map[string, any]

- object: mongo_pipeline_stage
  schema:
    stage: map[string, any]

- object: mongo_index_keys
  schema:
    fields: map[string, integer]

- object: mongo_bulk_operation
  schema:
    operation_type: string
    filter: mongo_filter
    document: mongo_document_data
    update: mongo_update

- object: mongodb_connection
  schema:
    connection_string: string
    created_at: date = now()
    database: string
    host: string
    is_active: boolean = true
    port: int = 27017
    updated_at: date = now()
    use_ssl: boolean = false

- object: mongodb_collection
  schema:
    connection_id: string
    created_at: date = now()
    document_count: int = 0
    name: string
    size: int = 0

- object: mongodb_index
  schema:
    collection_id: string
    created_at: date = now()
    is_unique: boolean = false
    keys: string #json
    name: string

- object: mongodb_query_log
  schema:
    collection_id: string
    documents_affected: int = 0
    duration_ms: int
    error_message: string
    executed_at: date = now()
    operation: insert | find | update | delete | aggregate | bulk_write = find
    status: success | failed | timeout = success
    user_id: string
