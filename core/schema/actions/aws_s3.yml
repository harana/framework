- name: Create S3 Bucket
  action: create_bucket
  inputs:
    acl: private | public-read | public-read-write | authenticated-read = private
    bucket: string #required
    region: string
    tags: S3Tags
  outputs:
    bucket: string
    location: string
    success: boolean

- name: Delete S3 Bucket
  action: delete_bucket
  inputs:
    bucket: string #required
    region: string
  outputs:
    success: boolean

- name: List S3 Buckets
  action: list_buckets
  inputs:
    region: string
  outputs:
    buckets: list[S3Bucket]

- name: Put S3 Object
  action: put_object
  inputs:
    acl: private | public-read | public-read-write | authenticated-read
    bucket: string #required
    content: bytes #required
    content_type: string
    key: string #required
    metadata: ObjectMetadata
    region: string
    server_side_encryption: AES256 | aws:kms
    storage_class: STANDARD | REDUCED_REDUNDANCY | STANDARD_IA | ONEZONE_IA | INTELLIGENT_TIERING | GLACIER | DEEP_ARCHIVE
    tags: S3Tags
  outputs:
    etag: string
    success: boolean
    version_id: string

- name: Get S3 Object
  action: get_object
  inputs:
    bucket: string #required
    key: string #required
    region: string
    version_id: string
  outputs:
    content: bytes
    content_type: string
    etag: string
    last_modified: datetime
    metadata: ObjectMetadata
    size: integer
    storage_class: string
    version_id: string

- name: Delete S3 Object
  action: delete_object
  inputs:
    bucket: string #required
    key: string #required
    region: string
    version_id: string
  outputs:
    success: boolean
    version_id: string

- name: Delete S3 Objects
  action: delete_objects
  inputs:
    bucket: string #required
    keys: list[string] #required
    region: string
  outputs:
    deleted: list[DeletedObject]
    errors: list[S3Error]
    success: boolean

- name: List S3 Objects
  action: list_objects
  inputs:
    bucket: string #required
    continuation_token: string
    delimiter: string
    max_keys: integer = 1000
    prefix: string
    region: string
    start_after: string
  outputs:
    contents: list[S3Object]
    continuation_token: string
    is_truncated: boolean
    key_count: integer
    next_continuation_token: string
    prefix: string

- name: Copy S3 Object
  action: copy_object
  inputs:
    destination_bucket: string #required
    destination_key: string #required
    metadata: ObjectMetadata
    metadata_directive: COPY | REPLACE = COPY
    region: string
    source_bucket: string #required
    source_key: string #required
    source_version_id: string
    storage_class: string
    tags: S3Tags
  outputs:
    etag: string
    success: boolean
    version_id: string

- name: Head S3 Object
  action: head_object
  inputs:
    bucket: string #required
    key: string #required
    region: string
    version_id: string
  outputs:
    content_length: integer
    content_type: string
    etag: string
    exists: boolean
    last_modified: datetime
    metadata: ObjectMetadata
    storage_class: string
    version_id: string

- name: Get S3 Object Presigned URL
  action: get_presigned_url
  inputs:
    bucket: string #required
    expires_in: integer = 3600
    key: string #required
    operation: get_object | put_object = get_object
    region: string
  outputs:
    expires_at: datetime
    url: string

- name: Set S3 Bucket Policy
  action: put_bucket_policy
  inputs:
    bucket: string #required
    policy: string #required
    region: string
  outputs:
    success: boolean

- name: Get S3 Bucket Policy
  action: get_bucket_policy
  inputs:
    bucket: string #required
    region: string
  outputs:
    policy: string

- name: Delete S3 Bucket Policy
  action: delete_bucket_policy
  inputs:
    bucket: string #required
    region: string
  outputs:
    success: boolean

- name: Put S3 Bucket Versioning
  action: put_bucket_versioning
  inputs:
    bucket: string #required
    region: string
    status: Enabled | Suspended #required
  outputs:
    success: boolean

- name: Get S3 Bucket Versioning
  action: get_bucket_versioning
  inputs:
    bucket: string #required
    region: string
  outputs:
    mfa_delete: string
    status: string

- name: Put S3 Bucket Encryption
  action: put_bucket_encryption
  inputs:
    bucket: string #required
    kms_master_key_id: string
    region: string
    sse_algorithm: AES256 | aws:kms #required
  outputs:
    success: boolean

- name: Get S3 Bucket Encryption
  action: get_bucket_encryption
  inputs:
    bucket: string #required
    region: string
  outputs:
    rules: list[EncryptionRule]

- name: Put S3 Bucket CORS
  action: put_bucket_cors
  inputs:
    bucket: string #required
    cors_rules: list[CorsRule] #required
    region: string
  outputs:
    success: boolean

- name: Get S3 Bucket CORS
  action: get_bucket_cors
  inputs:
    bucket: string #required
    region: string
  outputs:
    cors_rules: list[CorsRule]

- name: Delete S3 Bucket CORS
  action: delete_bucket_cors
  inputs:
    bucket: string #required
    region: string
  outputs:
    success: boolean

- name: Put S3 Bucket Lifecycle
  action: put_bucket_lifecycle
  inputs:
    bucket: string #required
    lifecycle_rules: list[LifecycleRule] #required
    region: string
  outputs:
    success: boolean

- name: Get S3 Bucket Lifecycle
  action: get_bucket_lifecycle
  inputs:
    bucket: string #required
    region: string
  outputs:
    rules: list[LifecycleRule]

- name: Put S3 Object Tagging
  action: put_object_tagging
  inputs:
    bucket: string #required
    key: string #required
    region: string
    tags: S3Tags #required
    version_id: string
  outputs:
    success: boolean
    version_id: string

- name: Get S3 Object Tagging
  action: get_object_tagging
  inputs:
    bucket: string #required
    key: string #required
    region: string
    version_id: string
  outputs:
    tags: S3Tags
    version_id: string

- name: Create Multipart Upload
  action: create_multipart_upload
  inputs:
    bucket: string #required
    content_type: string
    key: string #required
    metadata: ObjectMetadata
    region: string
    storage_class: string
  outputs:
    success: boolean
    upload_id: string

- name: Upload Part
  action: upload_part
  inputs:
    body: bytes #required
    bucket: string #required
    key: string #required
    part_number: integer #required
    region: string
    upload_id: string #required
  outputs:
    etag: string
    success: boolean

- name: Complete Multipart Upload
  action: complete_multipart_upload
  inputs:
    bucket: string #required
    key: string #required
    parts: list[CompletedPart] #required
    region: string
    upload_id: string #required
  outputs:
    bucket: string
    etag: string
    key: string
    location: string
    success: boolean

- name: Abort Multipart Upload
  action: abort_multipart_upload
  inputs:
    bucket: string #required
    key: string #required
    region: string
    upload_id: string #required
  outputs:
    success: boolean

- name: S3Object
  class:
    bucket: string
    key: string
    etag: string
    size: integer
    content_type: string
    storage_class: string
    last_modified: datetime
    metadata: ObjectMetadata
    version_id: string

- name: S3Bucket
  class:
    name: string
    creation_date: datetime

- name: S3Tags
  class:
    items: list[S3Tag]

- name: S3Tag
  class:
    key: string
    value: string

- name: ObjectMetadata
  class:
    content_type: string
    content_encoding: string
    content_language: string
    content_disposition: string
    cache_control: string
    custom: map[string, string]

- name: DeletedObject
  class:
    key: string
    version_id: string
    delete_marker: boolean
    delete_marker_version_id: string

- name: S3Error
  class:
    key: string
    version_id: string
    code: string
    message: string

- name: EncryptionRule
  class:
    sse_algorithm: string
    kms_master_key_id: string
    bucket_key_enabled: boolean

- name: CorsRule
  class:
    allowed_headers: list[string]
    allowed_methods: list[string]
    allowed_origins: list[string]
    expose_headers: list[string]
    max_age_seconds: integer

- name: LifecycleRule
  class:
    id: string
    status: string
    prefix: string
    expiration_days: integer
    noncurrent_version_expiration_days: integer
    transitions: list[LifecycleTransition]

- name: LifecycleTransition
  class:
    days: integer
    storage_class: string

- name: CompletedPart
  class:
    etag: string
    part_number: integer
