- name: Create Topic
  action: create_topic
  inputs:
    labels: PubSubLabels
    message_retention_duration: string
    project_id: string #required
    schema_settings: PubSubSchemaSettings
    topic_id: string #required
  outputs:
    success: boolean
    topic_name: string

- name: Delete Topic
  action: delete_topic
  inputs:
    project_id: string #required
    topic_id: string #required
  outputs:
    success: boolean

- name: Get Topic
  action: get_topic
  inputs:
    project_id: string #required
    topic_id: string #required
  outputs:
    labels: PubSubLabels
    message_retention_duration: string
    schema_settings: PubSubSchemaSettings
    topic_name: string

- name: List Topics
  action: list_topics
  inputs:
    page_size: integer = 100
    page_token: string
    project_id: string #required
  outputs:
    next_page_token: string
    topics: list[PubSubTopic]

- name: Publish Message
  action: publish
  inputs:
    attributes: PubSubMessageAttributes
    data: string #required
    ordering_key: string
    project_id: string #required
    topic_id: string #required
  outputs:
    message_id: string
    success: boolean

- name: Publish Batch Messages
  action: publish_batch
  inputs:
    messages: list[PubSubPublishMessage] #required
    project_id: string #required
    topic_id: string #required
  outputs:
    failure_count: integer
    message_ids: list[string]
    success_count: integer

- name: Create Subscription
  action: create_subscription
  inputs:
    ack_deadline_seconds: integer = 10
    dead_letter_policy: DeadLetterPolicy
    enable_message_ordering: boolean = false
    filter: string
    message_retention_duration: string
    project_id: string #required
    push_config: PushConfig
    retain_acked_messages: boolean = false
    retry_policy: RetryPolicy
    subscription_id: string #required
    topic_id: string #required
  outputs:
    subscription_name: string
    success: boolean

- name: Delete Subscription
  action: delete_subscription
  inputs:
    project_id: string #required
    subscription_id: string #required
  outputs:
    success: boolean

- name: Get Subscription
  action: get_subscription
  inputs:
    project_id: string #required
    subscription_id: string #required
  outputs:
    ack_deadline_seconds: integer
    labels: PubSubLabels
    message_retention_duration: string
    push_config: PushConfig
    subscription_name: string
    topic: string

- name: List Subscriptions
  action: list_subscriptions
  inputs:
    page_size: integer = 100
    page_token: string
    project_id: string #required
  outputs:
    next_page_token: string
    subscriptions: list[PubSubSubscription]

- name: Pull Messages
  action: pull
  inputs:
    max_messages: integer = 10
    project_id: string #required
    return_immediately: boolean = false
    subscription_id: string #required
  outputs:
    count: integer
    messages: list[PubSubReceivedMessage]

- name: Acknowledge Messages
  action: acknowledge
  inputs:
    ack_ids: list[string] #required
    project_id: string #required
    subscription_id: string #required
  outputs:
    success: boolean

- name: Modify Ack Deadline
  action: modify_ack_deadline
  inputs:
    ack_deadline_seconds: integer #required
    ack_ids: list[string] #required
    project_id: string #required
    subscription_id: string #required
  outputs:
    success: boolean

- name: Seek Subscription
  action: seek
  inputs:
    project_id: string #required
    snapshot: string
    subscription_id: string #required
    time: datetime
  outputs:
    success: boolean

- name: Create Snapshot
  action: create_snapshot
  inputs:
    labels: PubSubLabels
    project_id: string #required
    snapshot_id: string #required
    subscription_id: string #required
  outputs:
    expire_time: datetime
    snapshot_name: string
    success: boolean
    topic: string

- name: Delete Snapshot
  action: delete_snapshot
  inputs:
    project_id: string #required
    snapshot_id: string #required
  outputs:
    success: boolean

- name: List Topic Subscriptions
  action: list_topic_subscriptions
  inputs:
    page_size: integer = 100
    page_token: string
    project_id: string #required
    topic_id: string #required
  outputs:
    next_page_token: string
    subscriptions: list[string]

- name: Update Topic
  action: update_topic
  inputs:
    labels: PubSubLabels
    message_retention_duration: string
    project_id: string #required
    topic_id: string #required
  outputs:
    success: boolean

- name: Update Subscription
  action: update_subscription
  inputs:
    ack_deadline_seconds: integer
    labels: PubSubLabels
    message_retention_duration: string
    project_id: string #required
    push_config: PushConfig
    subscription_id: string #required
  outputs:
    success: boolean

- name: PubSubMessage
  class:
    message_id: string
    data: string
    attributes: PubSubMessageAttributes
    publish_time: datetime
    ordering_key: string

- name: PubSubLabels
  class:
    labels: list[PubSubLabel]

- name: PubSubLabel
  class:
    key: string
    value: string

- name: PubSubSchemaSettings
  class:
    schema: string
    encoding: string

- name: PubSubTopic
  class:
    name: string
    labels: PubSubLabels
    message_retention_duration: string

- name: PubSubMessageAttributes
  class:
    attributes: list[PubSubMessageAttribute]

- name: PubSubMessageAttribute
  class:
    key: string
    value: string

- name: PubSubPublishMessage
  class:
    data: string
    attributes: PubSubMessageAttributes
    ordering_key: string

- name: DeadLetterPolicy
  class:
    dead_letter_topic: string
    max_delivery_attempts: integer

- name: PushConfig
  class:
    push_endpoint: string
    attributes: PubSubMessageAttributes
    oidc_token: OidcToken

- name: OidcToken
  class:
    service_account_email: string
    audience: string

- name: RetryPolicy
  class:
    minimum_backoff: string
    maximum_backoff: string

- name: PubSubSubscription
  class:
    name: string
    topic: string
    ack_deadline_seconds: integer
    message_retention_duration: string
    labels: PubSubLabels

- name: PubSubReceivedMessage
  class:
    ack_id: string
    message: PubSubMessage
    delivery_attempt: integer
