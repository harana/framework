- name: App Started
  class: event_app_started
  extends: event
  schema:
    app_id: id #required
    app_name: string #required
    version: string #required
    environment: development | staging | production = development
    host: string #required
    port: int #required #min(1) #max(65535)
    started_at: datetime = now()
  set:
    attributes: $all_values
    type: app.started

- name: App Stopped
  class: event_app_stopped
  extends: event
  schema:
    app_id: id #required
    app_name: string #required
    reason: shutdown | crash | restart | sigterm | sigint = shutdown
    exit_code: int? #min(0) #max(255)
    uptime_seconds: int? #min(0)
    stopped_at: datetime = now()
  set:
    attributes: $all_values
    type: app.stopped

- name: App Config Updated
  class: event_app_config_updated
  extends: event
  schema:
    app_id: id #required
    config_key: string #required
    old_value: string?
    new_value: string?
    source: file | env | remote | api = file
    updated_by: string?
    updated_at: datetime = now()
  set:
    attributes: $all_values
    type: app.config.updated

- name: App Config Loaded
  class: event_app_config_loaded
  extends: event
  schema:
    app_id: id #required
    config_path: string?
    source: file | env | remote | api = file
    keys_loaded: int? #min(0)
    loaded_at: datetime = now()
  set:
    attributes: $all_values
    type: app.config.loaded

- name: App Health Check
  class: event_app_health_check
  extends: event
  schema:
    app_id: id #required
    status: healthy | degraded | unhealthy = healthy
    checks_passed: int? #min(0)
    checks_failed: int? #min(0)
    response_time_ms: int? #min(0)
    checked_at: datetime = now()
  set:
    attributes: $all_values
    type: app.health.check

- name: App Ready
  class: event_app_ready
  extends: event
  schema:
    app_id: id #required
    app_name: string #required
    startup_time_ms: int? #min(0)
    ready_at: datetime = now()
  set:
    attributes: $all_values
    type: app.ready

- name: App Shutting Down
  class: event_app_shutting_down
  extends: event
  schema:
    app_id: id #required
    reason: shutdown | restart | sigterm | sigint | timeout = shutdown
    grace_period_ms: int? #min(0)
    initiated_at: datetime = now()
  set:
    attributes: $all_values
    type: app.shutting_down

- name: App Error
  class: event_app_error
  extends: event
  schema:
    app_id: id #required
    error_type: string #required
    error_message: string #required
    stack_trace: string?
    severity: debug | info | warning | error | critical = error
    occurred_at: datetime = now()
  set:
    attributes: $all_values
    type: app.error

- name: App Connection Pool Created
  class: event_app_connection_pool_created
  extends: event
  schema:
    app_id: id #required
    pool_name: string #required
    pool_type: database | redis | http | custom = database
    min_connections: int? #min(0)
    max_connections: int? #min(1)
    created_at: datetime = now()
  set:
    attributes: $all_values
    type: app.connection_pool.created

- name: App Connection Pool Exhausted
  class: event_app_connection_pool_exhausted
  extends: event
  schema:
    app_id: id #required
    pool_name: string #required
    active_connections: int #required #min(0)
    max_connections: int #required #min(1)
    waiting_requests: int? #min(0)
    occurred_at: datetime = now()
  set:
    attributes: $all_values
    type: app.connection_pool.exhausted